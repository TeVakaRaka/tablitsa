<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Table OCR Prototype Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      const Icon = ({ children, size = 20, className = "" }) => (
        <svg
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          {children}
        </svg>
      );

      const FileImage = (props) => (
        <Icon {...props}>
          <rect x="3" y="3" width="18" height="18" rx="2" />
          <circle cx="9" cy="9" r="2" />
          <path d="M21 15l-5-5L5 21" />
        </Icon>
      );

      const X = (props) => (
        <Icon {...props}>
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </Icon>
      );

      const Edit2 = (props) => (
        <Icon {...props}>
          <path d="M17 3a2.8 2.8 0 1 1 4 4L7 21H3v-4L17 3z" />
        </Icon>
      );

      const ChevronRight = (props) => (
        <Icon {...props}>
          <polyline points="9 18 15 12 9 6" />
        </Icon>
      );

      const ChevronLeft = (props) => (
        <Icon {...props}>
          <polyline points="15 18 9 12 15 6" />
        </Icon>
      );

      const Download = (props) => (
        <Icon {...props}>
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
          <polyline points="7 10 12 15 17 10" />
          <line x1="12" y1="15" x2="12" y2="3" />
        </Icon>
      );

      const AlertCircle = (props) => (
        <Icon {...props}>
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </Icon>
      );

      const Check = (props) => (
        <Icon {...props}>
          <polyline points="20 6 9 17 4 12" />
        </Icon>
      );

      const Undo2 = (props) => (
        <Icon {...props}>
          <polyline points="9 14 4 9 9 4" />
          <path d="M20 20v-6a4 4 0 0 0-4-4H4" />
        </Icon>
      );

      const Redo2 = (props) => (
        <Icon {...props}>
          <polyline points="15 14 20 9 15 4" />
          <path d="M4 20v-6a4 4 0 0 1 4-4h12" />
        </Icon>
      );

      const TableOCRPrototype = () => {
        const [step, setStep] = useState(1);
        const [selectedProfile, setSelectedProfile] = useState("scan");
        const [tables, setTables] = useState([
          {
            id: "document1_Table_1",
            fileName: "document1.jpg",
            displayName: "Прайс-лист",
            rows: 5,
            cols: 3,
            columnSettings: [
              { name: "Код", included: true },
              { name: "Наименование", included: true },
              { name: "Цена", included: true }
            ],
            data: [
              [
                { value: "Код", status: "ok" },
                { value: "Наименование", status: "ok" },
                { value: "Цена", status: "ok" }
              ],
              [
                { value: "001", status: "ok" },
                { value: "Товар 1", status: "ok" },
                { value: "1500", status: "warning", variants: ["1500", "1800", "1500"] }
              ],
              [
                { value: "002", status: "ok" },
                { value: "Товар 2", status: "ok" },
                { value: "2300", status: "ok" }
              ],
              [
                { value: "003", status: "conflict", variants: ["003", "008", "D03"] },
                { value: "Товар 3", status: "ok" },
                { value: "1800", status: "ok" }
              ],
              [
                { value: "004", status: "ok" },
                { value: "Товар 4", status: "warning", variants: ["Товар 4", "Товар А", "Товар 4"] },
                { value: "3200", status: "ok" }
              ]
            ],
            selected: true
          },
          {
            id: "document2_Table_1",
            fileName: "document2.jpg",
            displayName: "Table_2",
            rows: 4,
            cols: 3,
            columnSettings: [
              { name: "Дата", included: true },
              { name: "Сумма", included: false },
              { name: "Статус", included: true }
            ],
            data: [
              [
                { value: "Дата", status: "ok" },
                { value: "Сумма", status: "ok" },
                { value: "Статус", status: "ok" }
              ],
              [
                { value: "01.12.2024", status: "ok" },
                { value: "15000", status: "ok" },
                { value: "Оплачено", status: "ok" }
              ],
              [
                { value: "05.12.2024", status: "conflict", variants: ["05.12.2024", "05.12.2024", "D5.12.2024"] },
                { value: "28000", status: "ok" },
                { value: "Ожидание", status: "ok" }
              ],
              [
                { value: "10.12.2024", status: "ok" },
                { value: "12500", status: "ok" },
                { value: "Оплачено", status: "ok" }
              ]
            ],
            selected: true
          }
        ]);
        const [currentTableIndex, setCurrentTableIndex] = useState(0);
        const [selectedCell, setSelectedCell] = useState(null);
        const [editingTableId, setEditingTableId] = useState(null);
        const [editingTableName, setEditingTableName] = useState("");
        const [editingCell, setEditingCell] = useState(null);
        const [editingCellValue, setEditingCellValue] = useState("");
        const [history, setHistory] = useState([]);
        const [historyIndex, setHistoryIndex] = useState(-1);
        const [exportFormat, setExportFormat] = useState("xlsx");

        const selectedTables = tables.filter((t) => t.selected);
        const currentTable = tables[currentTableIndex] || tables[0];

        const getCellStyle = (status) => {
          switch (status) {
            case "ok":
              return "bg-white";
            case "warning":
              return "bg-yellow-100 border-yellow-400";
            case "conflict":
              return "bg-red-100 border-red-400";
            default:
              return "bg-white";
          }
        };

        const saveCellEdit = () => {
          if (!editingCell || editingCellValue === editingCell.cell.value) {
            setEditingCell(null);
            return;
          }

          const change = {
            tableIndex: currentTableIndex,
            row: editingCell.row,
            col: editingCell.col,
            oldValue: editingCell.cell.value,
            oldStatus: editingCell.cell.status,
            newValue: editingCellValue,
            newStatus: "ok"
          };

          const newHistory = history.slice(0, historyIndex + 1);
          newHistory.push(change);
          setHistory(newHistory);
          setHistoryIndex(newHistory.length - 1);

          const updatedTables = [...tables];
          updatedTables[currentTableIndex].data[editingCell.row][editingCell.col] = {
            ...editingCell.cell,
            value: editingCellValue,
            status: "ok"
          };
          setTables(updatedTables);
          setEditingCell(null);
          setSelectedCell(null);
        };

        const cancelCellEdit = () => {
          setEditingCell(null);
          setEditingCellValue("");
        };

        const handleCellClick = (rowIdx, colIdx, cell) => {
          if (editingCell && (editingCell.row !== rowIdx || editingCell.col !== colIdx)) {
            saveCellEdit();
          }

          if (selectedCell?.row === rowIdx && selectedCell?.col === colIdx && !editingCell) {
            setEditingCell({ row: rowIdx, col: colIdx, cell });
            setEditingCellValue(cell.value);
            return;
          }

          setSelectedCell({ row: rowIdx, col: colIdx, cell });
          setEditingCell(null);
        };

        const undo = () => {
          if (historyIndex >= 0) {
            const change = history[historyIndex];
            const updatedTables = [...tables];
            updatedTables[change.tableIndex].data[change.row][change.col] = {
              ...updatedTables[change.tableIndex].data[change.row][change.col],
              value: change.oldValue,
              status: change.oldStatus
            };
            setTables(updatedTables);
            setHistoryIndex(historyIndex - 1);
          }
        };

        const redo = () => {
          if (historyIndex < history.length - 1) {
            const change = history[historyIndex + 1];
            const updatedTables = [...tables];
            updatedTables[change.tableIndex].data[change.row][change.col] = {
              ...updatedTables[change.tableIndex].data[change.row][change.col],
              value: change.newValue,
              status: change.newStatus
            };
            setTables(updatedTables);
            setHistoryIndex(historyIndex + 1);
          }
        };

        const acceptVariant = (variantValue) => {
          if (!selectedCell) return;

          const change = {
            tableIndex: currentTableIndex,
            row: selectedCell.row,
            col: selectedCell.col,
            oldValue: selectedCell.cell.value,
            oldStatus: selectedCell.cell.status,
            newValue: variantValue,
            newStatus: "ok"
          };

          const newHistory = history.slice(0, historyIndex + 1);
          newHistory.push(change);
          setHistory(newHistory);
          setHistoryIndex(newHistory.length - 1);

          const updatedTables = [...tables];
          updatedTables[currentTableIndex].data[selectedCell.row][selectedCell.col] = {
            ...selectedCell.cell,
            value: variantValue,
            status: "ok"
          };
          setTables(updatedTables);
          setSelectedCell(null);
          setEditingCell(null);
          setEditingCellValue("");
        };

        const toggleColumnInclusion = (colIdx) => {
          const updatedTables = [...tables];
          updatedTables[currentTableIndex].columnSettings[colIdx].included =
            !updatedTables[currentTableIndex].columnSettings[colIdx].included;
          setTables(updatedTables);
        };

        const manualEdit = () => {
          if (!selectedCell) return;
          setEditingCell(selectedCell);
          setEditingCellValue(selectedCell.cell.value);
        };

        const toggleTableSelection = (id) => {
          setTables(tables.map((t) => (t.id === id ? { ...t, selected: !t.selected } : t)));
        };

        const renameTable = (id) => {
          const table = tables.find((t) => t.id === id);
          setEditingTableId(id);
          setEditingTableName(table?.displayName || "");
        };

        const saveTableName = () => {
          if (editingTableName.trim()) {
            setTables((prevTables) =>
              prevTables.map((t) => (t.id === editingTableId ? { ...t, displayName: editingTableName.trim() } : t))
            );
          }
          setEditingTableId(null);
          setEditingTableName("");
        };

        const cancelRename = () => {
          setEditingTableId(null);
          setEditingTableName("");
        };

        const Step1 = () => (
          <div className="space-y-6">
            <div className="bg-white p-6 rounded-lg shadow-sm border">
              <h2 className="text-xl font-semibold mb-4">Загрузка документов</h2>

              <div className="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                <FileImage className="mx-auto mb-3 text-gray-400" size={48} />
                <p className="text-gray-600 mb-2">Перетащите файлы или нажмите для выбора</p>
                <p className="text-sm text-gray-400">JPG, PNG, TIFF, PDF (можно несколько файлов)</p>
              </div>

              <div className="mb-4">
                <label className="block text-sm font-medium mb-2">Профиль обработки:</label>
                <div className="flex gap-4">
                  <label className="flex items-center">
                    <input
                      type="radio"
                      value="scan"
                      checked={selectedProfile === "scan"}
                      onChange={(e) => setSelectedProfile(e.target.value)}
                      className="mr-2"
                    />
                    Скан (выравнивание, контраст)
                  </label>
                  <label className="flex items-center">
                    <input
                      type="radio"
                      value="photo"
                      checked={selectedProfile === "photo"}
                      onChange={(e) => setSelectedProfile(e.target.value)}
                      className="mr-2"
                    />
                    Фото (перспектива, тени)
                  </label>
                </div>
              </div>

              <button
                onClick={() => setStep(2)}
                className="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700"
              >
                Обработать и распознать
              </button>
            </div>
          </div>
        );

        const Step2 = () => (
          <div className="flex gap-4 h-[calc(100vh-200px)]">
            <div className="w-64 bg-white rounded-lg shadow-sm border p-4 overflow-y-auto flex-shrink-0">
              <h3 className="font-semibold mb-3">Таблицы ({tables.length})</h3>
              <div className="space-y-2">
                {tables.map((table, idx) => {
                  const conflictCount = table.data.flat().filter((c) => c.status === "conflict").length;
                  const warningCount = table.data.flat().filter((c) => c.status === "warning").length;

                  return (
                    <div
                      key={table.id}
                      onClick={() => setCurrentTableIndex(idx)}
                      className={`p-3 rounded border cursor-pointer transition-colors ${
                        idx === currentTableIndex ? "bg-blue-50 border-blue-500" : "hover:bg-gray-50"
                      }`}
                    >
                      <div className="flex items-start justify-between mb-1">
                        <div className="flex items-center gap-2 flex-grow min-w-0">
                          <input
                            type="checkbox"
                            checked={table.selected}
                            onChange={(e) => {
                              e.stopPropagation();
                              toggleTableSelection(table.id);
                            }}
                            className="flex-shrink-0"
                          />
                          <span className="font-medium text-sm truncate">{table.displayName}</span>
                        </div>
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            renameTable(table.id);
                          }}
                          className="text-gray-400 hover:text-gray-600 flex-shrink-0"
                        >
                          <Edit2 size={12} />
                        </button>
                      </div>
                      <p className="text-xs text-gray-500 mb-1">{table.fileName}</p>
                      <p className="text-xs text-gray-500">Размер: {table.rows}×{table.cols}</p>
                      {(conflictCount > 0 || warningCount > 0) && (
                        <div className="flex gap-2 mt-2 text-xs">
                          {conflictCount > 0 && (
                            <span className="bg-red-100 text-red-700 px-2 py-0.5 rounded">❌ {conflictCount}</span>
                          )}
                          {warningCount > 0 && (
                            <span className="bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded">
                              ⚠ {warningCount}
                            </span>
                          )}
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>
            </div>

            <div className="flex-grow bg-white rounded-lg shadow-sm border p-6 flex flex-col">
              <div className="flex justify-between items-center mb-4">
                <div className="flex items-center gap-4">
                  {editingTableId === currentTable.id ? (
                    <div className="flex items-center gap-2">
                      <input
                        type="text"
                        value={editingTableName}
                        onChange={(e) => setEditingTableName(e.target.value)}
                        onKeyDown={(e) => {
                          if (e.key === "Enter") saveTableName();
                          if (e.key === "Escape") cancelRename();
                        }}
                        onFocus={(e) => e.target.select()}
                        className="text-xl font-semibold border-b-2 border-blue-500 outline-none px-1"
                        autoFocus
                      />
                      <button onClick={saveTableName} className="text-green-600 hover:text-green-700" title="Сохранить">
                        <Check size={20} />
                      </button>
                      <button onClick={cancelRename} className="text-red-600 hover:text-red-700" title="Отмена">
                        <X size={20} />
                      </button>
                    </div>
                  ) : (
                    <>
                      <h2 className="text-xl font-semibold">{currentTable.displayName}</h2>
                      <button
                        onClick={() => renameTable(currentTable.id)}
                        className="text-gray-400 hover:text-gray-600"
                        title="Переименовать таблицу"
                      >
                        <Edit2 size={16} />
                      </button>
                    </>
                  )}
                  <span className="text-sm text-gray-500">
                    ({currentTableIndex + 1} из {tables.length})
                  </span>
                </div>

                <div className="flex gap-2">
                  <button
                    onClick={undo}
                    disabled={historyIndex < 0}
                    className="p-1 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    title="Отменить последнее действие"
                  >
                    <Undo2 size={18} />
                  </button>
                  <button
                    onClick={redo}
                    disabled={historyIndex >= history.length - 1}
                    className="p-1 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                    title="Вернуть отменённое действие"
                  >
                    <Redo2 size={18} />
                  </button>
                </div>
              </div>

              <div className="border rounded mb-4 overflow-auto flex-grow p-1">
                <table className="w-full text-sm border-collapse">
                  <thead className="bg-gray-50 sticky top-0">
                    <tr>
                      {currentTable.data[0].map((cell, colIdx) => (
                        <th key={colIdx} className="border p-2 text-left font-medium">
                          <div className="flex items-center gap-2">
                            <input
                              type="checkbox"
                              checked={currentTable.columnSettings[colIdx].included}
                              onChange={() => toggleColumnInclusion(colIdx)}
                              title="Включить в экспорт"
                            />
                            <span
                              className={!currentTable.columnSettings[colIdx].included ? "text-gray-400 line-through" : ""}
                            >
                              {cell.value}
                            </span>
                          </div>
                        </th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {currentTable.data.slice(1).map((row, rowIdx) => (
                      <tr key={rowIdx}>
                        {row.map((cell, colIdx) => {
                          const isEditing = editingCell?.row === rowIdx + 1 && editingCell?.col === colIdx;
                          const isSelected = selectedCell?.row === rowIdx + 1 && selectedCell?.col === colIdx;

                          return (
                            <td
                              key={colIdx}
                              onClick={() => handleCellClick(rowIdx + 1, colIdx, cell)}
                              className={`border p-2 cursor-pointer transition-colors ${getCellStyle(cell.status)} ${
                                isSelected && !isEditing ? "ring-2 ring-blue-500" : ""
                              } ${!currentTable.columnSettings[colIdx].included ? "bg-gray-100 text-gray-400" : ""}`}
                              title={isSelected && !isEditing ? "Двойной клик для редактирования" : ""}
                            >
                              {isEditing ? (
                                <div className="flex items-center gap-1" onClick={(e) => e.stopPropagation()}>
                                  <input
                                    type="text"
                                    value={editingCellValue}
                                    onChange={(e) => setEditingCellValue(e.target.value)}
                                    onKeyDown={(e) => {
                                      e.stopPropagation();
                                      if (e.key === "Enter") {
                                        e.preventDefault();
                                        saveCellEdit();
                                      }
                                      if (e.key === "Escape") {
                                        e.preventDefault();
                                        cancelCellEdit();
                                      }
                                    }}
                                    onFocus={(e) => e.target.select()}
                                    className="flex-grow border-b-2 border-blue-500 outline-none px-1 bg-white w-full"
                                    autoFocus
                                  />
                                  <button
                                    onClick={(e) => {
                                      e.stopPropagation();
                                      saveCellEdit();
                                    }}
                                    className="text-green-600 hover:text-green-700 flex-shrink-0"
                                  >
                                    <Check size={16} />
                                  </button>
                                  <button
                                    onClick={(e) => {
                                      e.stopPropagation();
                                      cancelCellEdit();
                                    }}
                                    className="text-red-600 hover:text-red-700 flex-shrink-0"
                                  >
                                    <X size={16} />
                                  </button>
                                </div>
                              ) : (
                                cell.value
                              )}
                            </td>
                          );
                        })}
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>

              {selectedCell && selectedCell.cell.status !== "ok" && (
                <div className="border-t pt-4">
                  <div className="bg-gray-50 p-4 rounded">
                    <div className="flex items-start gap-2 mb-3">
                      <AlertCircle
                        className={selectedCell.cell.status === "conflict" ? "text-red-600" : "text-yellow-600"}
                        size={20}
                      />
                      <div className="flex-grow">
                        <h3 className="font-medium mb-1">
                          {selectedCell.cell.status === "conflict" ? "Критический конфликт" : "Требуется проверка"}
                        </h3>
                        <p className="text-sm text-gray-600 mb-3">
                          Строка {selectedCell.row + 1}, Столбец {selectedCell.col + 1}
                        </p>

                        <div className="space-y-2">
                          <p className="text-sm font-medium">Варианты от OCR-движков:</p>
                          {selectedCell.cell.variants?.map((variant, idx) => (
                            <div key={idx} className="flex items-center gap-2">
                              <button
                                onClick={() => acceptVariant(variant)}
                                className="px-3 py-1 text-sm border rounded hover:bg-white bg-gray-50"
                              >
                                Движок {idx + 1}: "{variant}"
                              </button>
                            </div>
                          ))}
                          <button
                            onClick={manualEdit}
                            className="px-3 py-1 text-sm border rounded hover:bg-blue-50 border-blue-500 text-blue-700"
                          >
                            Ввести вручную
                          </button>
                        </div>
                      </div>
                      <button onClick={() => setSelectedCell(null)} className="text-gray-400 hover:text-gray-600">
                        <X size={18} />
                      </button>
                    </div>
                  </div>
                </div>
              )}

              <div className="flex justify-between mt-4">
                <div className="flex gap-2">
                  <button
                    onClick={() => setCurrentTableIndex(Math.max(0, currentTableIndex - 1))}
                    disabled={currentTableIndex === 0}
                    className="flex items-center gap-1 px-3 py-2 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    <ChevronLeft size={16} /> Предыдущая
                  </button>
                  <button
                    onClick={() => setCurrentTableIndex(Math.min(tables.length - 1, currentTableIndex + 1))}
                    disabled={currentTableIndex === tables.length - 1}
                    className="flex items-center gap-1 px-3 py-2 border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
                  >
                    Следующая <ChevronRight size={16} />
                  </button>
                </div>

                <button onClick={() => setStep(3)} className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                  Экспортировать →
                </button>
              </div>
            </div>
          </div>
        );

        const Step3 = () => (
          <div className="space-y-6">
            <div className="bg-white p-6 rounded-lg shadow-sm border">
              <h2 className="text-xl font-semibold mb-4">Экспорт таблиц</h2>

              <div className="mb-6">
                <label className="block text-sm font-medium mb-2">Формат экспорта:</label>
                <div className="flex gap-4">
                  <label className="flex items-center">
                    <input
                      type="radio"
                      value="xlsx"
                      checked={exportFormat === "xlsx"}
                      onChange={(e) => setExportFormat(e.target.value)}
                      className="mr-2"
                    />
                    XLSX (все таблицы в один файл, отдельные листы)
                  </label>
                  <label className="flex items-center">
                    <input
                      type="radio"
                      value="csv"
                      checked={exportFormat === "csv"}
                      onChange={(e) => setExportFormat(e.target.value)}
                      className="mr-2"
                    />
                    CSV (отдельный файл на каждую таблицу)
                  </label>
                </div>
              </div>

              <div className="bg-gray-50 p-4 rounded mb-6">
                <h3 className="font-medium mb-3">Таблицы для экспорта ({selectedTables.length}):</h3>
                <div className="space-y-2">
                  {selectedTables.map((table) => {
                    const includedColumns = table.columnSettings.filter((c) => c.included).length;
                    return (
                      <div key={table.id} className="flex items-center justify-between bg-white p-3 rounded border">
                        <div className="flex items-center gap-3">
                          <input type="checkbox" checked readOnly />
                          <div>
                            <p className="font-medium">{table.displayName}</p>
                            <p className="text-sm text-gray-500">
                              Столбцов: {includedColumns}/{table.cols} | Строк: {table.rows}
                            </p>
                          </div>
                        </div>
                        <div className="text-sm text-gray-600">
                          {exportFormat === "xlsx" ? `→ Лист "${table.displayName}"` : `→ ${table.displayName}.csv`}
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {exportFormat === "xlsx" && (
                <div className="mb-4">
                  <label className="block text-sm font-medium mb-2">Имя файла XLSX:</label>
                  <input type="text" defaultValue="tables_export.xlsx" className="w-full border rounded px-3 py-2" />
                </div>
              )}

              {exportFormat === "csv" && (
                <div className="mb-4 space-y-2">
                  <div>
                    <label className="block text-sm font-medium mb-2">Папка для экспорта:</label>
                    <div className="flex gap-2">
                      <input type="text" defaultValue="C:\\Export" className="flex-grow border rounded px-3 py-2" />
                      <button className="px-4 py-2 border rounded hover:bg-gray-50">Выбрать...</button>
                    </div>
                  </div>
                  <div className="flex gap-4">
                    <div className="flex-grow">
                      <label className="block text-sm font-medium mb-2">Кодировка:</label>
                      <select className="w-full border rounded px-3 py-2">
                        <option>UTF-8</option>
                        <option>Windows-1251</option>
                      </select>
                    </div>
                    <div className="flex-grow">
                      <label className="block text-sm font-medium mb-2">Разделитель:</label>
                      <select className="w-full border rounded px-3 py-2">
                        <option>;</option>
                        <option>,</option>
                        <option>Tab</option>
                      </select>
                    </div>
                  </div>
                </div>
              )}

              <div className="flex justify-between">
                <button onClick={() => setStep(2)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  ← Назад
                </button>
                <div className="flex gap-2">
                  <button className="px-4 py-2 border rounded hover:bg-gray-50">Сохранить проект</button>
                  <button className="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                    <Download size={16} /> Экспортировать
                  </button>
                </div>
              </div>
            </div>
          </div>
        );

        return (
          <div className="min-h-screen bg-gray-100 p-6">
            <div className="max-w-7xl mx-auto">
              <div className="bg-white p-4 rounded-lg shadow-sm border mb-6">
                <h1 className="text-2xl font-bold mb-2">OCR Таблиц - Прототип UI</h1>
                <div className="flex items-center gap-2 text-sm">
                  <span className={step >= 1 ? "text-blue-600 font-medium" : "text-gray-400"}>1. Загрузка</span>
                  <ChevronRight size={16} className="text-gray-400" />
                  <span className={step >= 2 ? "text-blue-600 font-medium" : "text-gray-400"}>2. Редактирование</span>
                  <ChevronRight size={16} className="text-gray-400" />
                  <span className={step >= 3 ? "text-blue-600 font-medium" : "text-gray-400"}>3. Экспорт</span>
                </div>
              </div>

              {step === 1 && <Step1 />}
              {step === 2 && <Step2 />}
              {step === 3 && <Step3 />}
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<TableOCRPrototype />);
    </script>
  </body>
</html>
